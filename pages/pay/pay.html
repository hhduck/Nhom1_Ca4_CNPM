<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thanh toán và giao hàng | La Cuisine Ngọt</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&family=Inspiration&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/style.css">
  <link rel="stylesheet" href="../../assets/css/animations.css">
  <link rel="stylesheet" href="pay.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body>

  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="../home/home.html">La Cuisine Ngọt</a>
      </div>
      <ul class="nav-menu">
        <li><a href="../home/home.html#products">SẢN PHẨM</a></li>
        <li><a href="../home/home.html#khuyenmai">KHUYẾN MÃI</a></li>
        <li><a href="../home/home.html#contact">LIÊN HỆ</a></li>
        <li>
          <a href="../cart/cart.html" class="nav-cart" style="padding: 0 10px;">
            <i class="fas fa-shopping-cart"></i>
          </a>
        </li>
        <li class="nav-user">
          <a href="../login/login.html" class="nav-login-1">ĐĂNG NHẬP</a>
          <span class="nav-separator">|</span>
          <a href="../register/register.html" class="nav-login-2">ĐĂNG KÝ</a>
          <div class="user-menu hidden">
            <ul>
              <li><button id="accountBtn">Thông tin tài khoản</button></li>
              <li><button id="logoutBtnNav">Đăng xuất</button></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <main class="container page">
    <section class="box checkout">
      <h1 class="page-title">Thanh toán và giao hàng</h1>

      <form id="checkoutForm" class="checkout-form" autocomplete="off" novalidate>
        <div class="form-grid">

          <div class="form-col">
            <h3 class="form-title">Thông tin người dùng</h3>
            <div class="form-group">
              <label>Họ và tên <span class="required">*</span></label>
              <input name="fullname" required type="text" placeholder="Nguyễn Văn A">
              <span class="error-msg" id="nameError"></span>
            </div>
            <div class="form-group">
              <label>Số điện thoại <span class="required">*</span></label>
              <input name="phone" required type="tel" placeholder="09x xxx xxxx">
              <span class="error-msg" id="phoneError"></span>
            </div>
            <div class="form-group">
              <label>Địa chỉ mail <span class="required">*</span></label>
              <input name="email" required type="text" placeholder="email@domain.com">
              <span class="error-msg" id="emailError"></span>
            </div>
            <div class="form-group">
              <label for="orderNote">Ghi chú đơn hàng</label>
              <textarea id="orderNote" name="orderNote" rows="3"
                placeholder="Vd: Giao giờ hành chính, không gọi chuông, đóng gói kỹ..."
                style="resize: vertical;"></textarea>
              <small class="note-hint">Ghi chú này sẽ được gửi đến nhân viên xử lý đơn hàng</small>
            </div>
          </div>

          <div class="form-col">
            <h3 class="form-title">Phương thức nhận hàng</h3>
            <div class="form-group delivery-method">
              <label>Chọn phương thức <span class="required">*</span></label>
              <div class="delivery-options">
                <label>
                  <input type="radio" name="delivery" value="store" checked>
                  Nhận trực tiếp tại cửa hàng
                </label>
                <label>
                  <input type="radio" name="delivery" value="delivery">
                  Giao hàng tận nơi
                </label>
              </div>
            </div>

            <div class="form-group">
              <label>Thành phố</label>
              <input type="text" value="TP. Hồ Chí Minh" readonly
                style="background-color: #f5f5f5; cursor: not-allowed;">
            </div>

            <div id="deliveryAddressBlock" style="display: none;">
              <div class="form-group">
                <label for="district">Quận / Huyện <span class="required">*</span></label>
                <select id="district" name="district">
                  <option value="">-- Chọn quận / huyện --</option>
                </select>
                <span class="error-msg" id="districtError"></span>
              </div>

              <div class="form-group">
                <label for="ward">Phường / Xã <span class="required">*</span></label>
                <select id="ward" name="ward" disabled>
                  <option value="">-- Chọn phường / xã --</option>
                </select>
                <span class="error-msg" id="wardError"></span>
              </div>

              <div class="form-group">
                <label for="address">Địa chỉ cụ thể <span class="required">*</span></label>
                <input type="text" id="address" name="address" placeholder="Số nhà, tên đường...">
                <span class="error-msg" id="addressError"></span>
              </div>
            </div>

            <div class="form-group">
              <label for="deliveryTime">Thời gian nhận bánh (sau ít nhất 2 giờ) <span class="required">*</span></label>
              <input type="datetime-local" id="deliveryTime" name="deliveryTime">
              <span class="error-msg" id="deliveryTimeError"></span>
            </div>
          </div>
        </div>

        <h3 class="form-title">Đơn hàng của bạn</h3>
        <div class="order-table-wrap">
          <table class="order-table">
            <thead>
              <tr>
                <th>Sản phẩm</th>
                <th>Tạm tính</th>
              </tr>
            </thead>
            <tbody id="cartTableBody">
              <tr>
                <td colspan="2" style="text-align: center;">Đang tải giỏ hàng...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="form-group promo-wrap">
          <label for="promotionSelect">Mã khuyến mãi</label>
          <select id="promotionSelect" class="promo-select">
            <option value="">-- Chọn mã khuyến mãi --</option>
          </select>
          <span id="promoMessage" class="promo-message"></span>
        </div>

        <div class="order-footer">
          <div class="totals">
            <div><span>Tạm tính</span><strong id="subtotal">0₫</strong></div>
            <div><span>VAT (8%)</span><strong id="vat">0₫</strong></div>
            <div><span>Phí vận chuyển</span><strong id="shipping">Miễn phí</strong></div>
            <div id="discountRow" style="display: none; color: #e74c3c;">
              <span>Giảm giá</span><strong id="discount">0₫</strong>
            </div>
            <div class="total-line"><span>Tổng tiền</span><strong id="grandtotal">0₫</strong></div>
          </div>
          <button id="placeOrder" type="submit" class="btn">Thanh toán</button>
        </div>
      </form>
    </section>
  </main>

  <footer class="footer">
  </footer>

  <script src="pay.js"></script>
</body>

</html>